MOBILE APP SETUP GUIDE
======================

This guide explains how to build and use the YouTube Audio Downloader on Android and iOS devices.

ARCHITECTURE OVERVIEW
---------------------
The mobile apps are built using Capacitor, which wraps the existing React web app into native containers for Android and iOS. The mobile apps connect to a backend server running on your computer or a remote server.

Key points:
- The actual downloading happens on the SERVER, not the mobile device
- Mobile apps are thin clients that communicate with the server
- You need to run the server somewhere accessible from your mobile device

OPTION 1: BROWSER ACCESS (Simplest)
-----------------------------------
You can access the app directly from your mobile browser without building native apps:

1. Run the server on your computer:
   npm run dev

2. Find your computer's local IP address:
   - Windows: ipconfig (look for IPv4 Address)
   - Mac/Linux: ifconfig or ip addr (look for inet address)
   - Usually something like 192.168.1.x

3. On your phone (same WiFi network):
   - Open browser and go to: http://YOUR_IP:5000
   - Example: http://192.168.1.100:5000

OPTION 2: BUILD NATIVE ANDROID APP
----------------------------------
Prerequisites:
- Android Studio installed
- Android SDK configured
- Node.js and npm

Steps:

1. Build the web app:
   cd client
   npm run build

2. Add Android platform (first time only):
   npx cap add android

3. Sync the web app to native project:
   npx cap sync android

4. Open in Android Studio:
   npx cap open android

5. In Android Studio:
   - Wait for Gradle sync to complete
   - Connect your Android device or start an emulator
   - Click Run (green play button)
   - The APK will be installed on your device

6. Configure server connection in the app:
   - Open the Settings tab
   - Enter your server URL (e.g., http://192.168.1.100:5000)
   - Click Save

Building a Release APK:
   - In Android Studio: Build > Generate Signed Bundle/APK
   - Choose APK
   - Create or use a signing key
   - Select "release" build variant
   - The APK will be in: android/app/build/outputs/apk/release/

OPTION 3: BUILD NATIVE iOS APP
------------------------------
Prerequisites:
- macOS with Xcode installed
- Apple Developer account (for device testing)
- Node.js and npm

Steps:

1. Build the web app:
   cd client
   npm run build

2. Add iOS platform (first time only):
   npx cap add ios

3. Sync the web app to native project:
   npx cap sync ios

4. Open in Xcode:
   npx cap open ios

5. In Xcode:
   - Select your development team in Signing & Capabilities
   - Connect your iOS device
   - Click Run (play button)

6. Configure server connection in the app:
   - Open the Settings tab
   - Enter your server URL
   - Click Save

MOBILE APP CONFIGURATION
------------------------
The mobile app stores the server URL in local storage. When you first open the app:

1. Go to the Settings tab
2. Enter the URL of your running server
3. Click Save to test the connection
4. If successful, you'll see "Connected" badge

The server URL format:
- Local network: http://192.168.1.x:5000
- Public server: https://your-server.com

NETWORK REQUIREMENTS
--------------------
For local network access:
- Both devices must be on the same WiFi network
- Your computer's firewall must allow port 5000
- The server must be running

For remote access:
- You'll need to expose the server to the internet
- Consider security implications (authentication, HTTPS)
- Use a reverse proxy for production deployments

TROUBLESHOOTING
---------------

1. "Connection failed" error:
   - Check the server is running
   - Verify the IP address is correct
   - Ensure both devices are on same network
   - Check firewall settings

2. Can't install APK on Android:
   - Enable "Install from unknown sources" in settings
   - Grant necessary permissions

3. iOS app won't run:
   - Check your Apple Developer signing
   - Make sure device is trusted
   - Check Xcode build logs for errors

4. Downloads not working:
   - The server handles all downloads
   - Check server logs for errors
   - Verify yt-dlp is installed on server

UPDATING THE APP
----------------
When you make changes to the web app:

1. Rebuild the web app:
   cd client
   npm run build

2. Sync changes to native projects:
   npx cap sync

3. Rebuild in Android Studio/Xcode

FILE STRUCTURE
--------------
client/
  capacitor.config.ts    - Capacitor configuration
  dist/                  - Built web app (synced to native)
  android/               - Android native project (after cap add)
  ios/                   - iOS native project (after cap add)

The native projects (android/, ios/) are generated by Capacitor and should be committed to version control for team collaboration.
